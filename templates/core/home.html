{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "RutaCeleste - Inicio" %}{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero-section bg-primary text-white py-5 mb-5 rounded">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h1 class="display-4 fw-bold mb-3">
                    {% trans "Bienvenido a RutaCeleste" %}
                </h1>
                <p class="lead mb-4">
                    {% trans "Tu aerolínea de confianza para volar por toda Argentina" %}
                </p>
                {% if not user.is_authenticated %}
                    <div class="d-flex gap-3">
                        <a href="{% url 'register' %}" class="btn btn-light btn-lg">
                            <i class="fas fa-user-plus me-2"></i>{% trans "Registrarse" %}
                        </a>
                        <a href="{% url 'login' %}" class="btn btn-outline-light btn-lg">
                            <i class="fas fa-sign-in-alt me-2"></i>{% trans "Iniciar Sesión" %}
                        </a>
                    </div>
                {% endif %}
            </div>
            <div class="col-lg-6 text-center">
                <i class="fas fa-plane fa-8x opacity-75"></i>
            </div>
        </div>
    </div>
</div>

<!-- Buscador de Vuelos -->
<div class="card shadow-lg mb-5">
    <div class="card-header bg-primary text-white">
        <h3 class="card-title mb-0">
            <i class="fas fa-search me-2"></i>{% trans "Buscar Vuelos" %}
        </h3>
    </div>
    <div class="card-body">
        <form method="post" class="row g-3">
            {% csrf_token %}
            <div class="col-md-4">
                <label for="{{ form.origen.id_for_label }}" class="form-label">{% trans "Origen" %}</label>
                {{ form.origen }}
            </div>
            <div class="col-md-4">
                <label for="{{ form.destino.id_for_label }}" class="form-label">{% trans "Destino" %}</label>
                {{ form.destino }}
            </div>
            <div class="col-md-4">
                <label for="{{ form.fecha_salida.id_for_label }}" class="form-label">{% trans "Fecha de Salida" %}</label>
                {{ form.fecha_salida }}
            </div>
            <div class="col-12">
                <button type="submit" class="btn btn-primary btn-lg">
                    <i class="fas fa-search me-2"></i>{% trans "Buscar Vuelos" %}
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Resultados de Búsqueda -->
{% if busqueda_realizada %}
    {% if vuelos %}
        <div class="mb-5">
            <h3 class="mb-4">
                <i class="fas fa-plane-departure me-2"></i>{% trans "Vuelos Encontrados" %}
            </h3>
            <div class="row">
                {% for vuelo in vuelos %}
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="card flight-card h-100 shadow-sm">
                        <div class="card-header card-header-success">
                            <h6 class="card-title mb-0">
                                <i class="fas fa-route me-2"></i>
                                {{ vuelo.origen }} → {{ vuelo.destino }}
                            </h6>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-6">
                                    <small class="text-muted">{% trans "Fecha" %}</small>
                                    <div class="fw-bold">{{ vuelo.fecha_salida|date:"d/m/Y" }}</div>
                                </div>
                                <div class="col-6">
                                    <small class="text-muted">{% trans "Hora" %}</small>
                                    <div class="fw-bold">{{ vuelo.fecha_salida|date:"H:i" }}</div>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-6">
                                    <small class="text-muted">{% trans "Precio desde" %}</small>
                                    <div class="fw-bold text-success">${{ vuelo.precio_base|floatformat:0 }}</div>
                                </div>
                                <div class="col-6">
                                    <small class="text-muted">{% trans "Avión" %}</small>
                                    <div class="fw-bold">{{ vuelo.avion.modelo }}</div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <small class="text-muted">{% trans "Asientos" %}</small>
                                <div class="fw-bold">{{ vuelo.asientos_disponibles.count }} {% trans "disponibles" %}</div>
                            </div>
                        </div>
                        <div class="card-footer">
                            {% if user.is_authenticated %}
                                <a href="{% url 'detalle_vuelo' vuelo.pk %}" class="btn btn-primary w-100">
                                    <i class="fas fa-eye me-2"></i>{% trans "Ver Detalles" %}
                                </a>
                            {% else %}
                                <a href="{% url 'login' %}" class="btn btn-outline-primary w-100">
                                    <i class="fas fa-sign-in-alt me-2"></i>{% trans "Iniciar Sesión para Reservar" %}
                                </a>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    {% elif vuelos_alternativos %}
        <div class="mb-5">
            <div class="alert alert-info">
                <i class="fas fa-info-circle me-2"></i>
                {% trans "No encontramos vuelos para la fecha exacta, pero aquí tienes opciones en fechas cercanas:" %}
            </div>
            <h3 class="mb-4">
                <i class="fas fa-calendar-alt me-2"></i>{% trans "Fechas Alternativas" %}
            </h3>
            <div class="row">
                {% for vuelo in vuelos_alternativos %}
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="card flight-card h-100 shadow-sm">
                        <div class="card-header card-header-warning">
                            <h6 class="card-title mb-0">
                                <i class="fas fa-route me-2"></i>
                                {{ vuelo.origen }} → {{ vuelo.destino }}
                            </h6>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-6">
                                    <small class="text-muted">{% trans "Fecha" %}</small>
                                    <div class="fw-bold">{{ vuelo.fecha_salida|date:"d/m/Y" }}</div>
                                </div>
                                <div class="col-6">
                                    <small class="text-muted">{% trans "Hora" %}</small>
                                    <div class="fw-bold">{{ vuelo.fecha_salida|date:"H:i" }}</div>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-6">
                                    <small class="text-muted">{% trans "Precio desde" %}</small>
                                    <div class="fw-bold text-success">${{ vuelo.precio_base|floatformat:0 }}</div>
                                </div>
                                <div class="col-6">
                                    <small class="text-muted">{% trans "Avión" %}</small>
                                    <div class="fw-bold">{{ vuelo.avion.modelo }}</div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <small class="text-muted">{% trans "Asientos" %}</small>
                                <div class="fw-bold">{{ vuelo.asientos_disponibles.count }} {% trans "disponibles" %}</div>
                            </div>
                        </div>
                        <div class="card-footer">
                            {% if user.is_authenticated %}
                                <a href="{% url 'detalle_vuelo' vuelo.pk %}" class="btn btn-primary w-100">
                                    <i class="fas fa-eye me-2"></i>{% trans "Ver Detalles" %}
                                </a>
                            {% else %}
                                <a href="{% url 'login' %}" class="btn btn-outline-primary w-100">
                                    <i class="fas fa-sign-in-alt me-2"></i>{% trans "Iniciar Sesión para Reservar" %}
                                </a>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    {% else %}
        <div class="alert alert-warning text-center">
            <i class="fas fa-exclamation-triangle fa-2x mb-3"></i>
            <h4>{% trans "No se encontraron vuelos" %}</h4>
            <p>{% trans "No hay vuelos disponibles para los criterios de búsqueda especificados." %}</p>
            <a href="{% url 'lista_vuelos' %}" class="btn btn-primary">
                <i class="fas fa-list me-2"></i>{% trans "Ver Todos los Vuelos" %}
            </a>
        </div>
    {% endif %}
{% endif %}

<!-- Vuelos Próximos (solo si no hay búsqueda) -->
{% if not busqueda_realizada and vuelos_proximos %}
<div class="mb-5">
    <h3 class="mb-4">
        <i class="fas fa-clock me-2"></i>{% trans "Vuelos Próximos" %}
    </h3>
    <div class="row">
        {% for vuelo in vuelos_proximos %}
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card flight-card h-100 shadow-sm">
                <div class="card-header card-header-info">
                    <h6 class="card-title mb-0">
                        <i class="fas fa-route me-2"></i>
                        {{ vuelo.origen }} → {{ vuelo.destino }}
                    </h6>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-6">
                            <small class="text-muted">{% trans "Fecha" %}</small>
                            <div class="fw-bold">{{ vuelo.fecha_salida|date:"d/m/Y" }}</div>
                        </div>
                        <div class="col-6">
                            <small class="text-muted">{% trans "Hora" %}</small>
                            <div class="fw-bold">{{ vuelo.fecha_salida|date:"H:i" }}</div>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-6">
                            <small class="text-muted">{% trans "Precio desde" %}</small>
                            <div class="fw-bold text-success">${{ vuelo.precio_base|floatformat:0 }}</div>
                        </div>
                        <div class="col-6">
                            <small class="text-muted">{% trans "Avión" %}</small>
                            <div class="fw-bold">{{ vuelo.avion.modelo }}</div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <small class="text-muted">{% trans "Asientos" %}</small>
                        <div class="fw-bold">{{ vuelo.asientos_disponibles.count }} {% trans "disponibles" %}</div>
                    </div>
                </div>
                <div class="card-footer">
                    {% if user.is_authenticated %}
                        <a href="{% url 'detalle_vuelo' vuelo.pk %}" class="btn btn-primary w-100">
                            <i class="fas fa-eye me-2"></i>{% trans "Ver Detalles" %}
                        </a>
                    {% else %}
                        <a href="{% url 'login' %}" class="btn btn-outline-primary w-100">
                            <i class="fas fa-sign-in-alt me-2"></i>{% trans "Iniciar Sesión para Reservar" %}
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    <div class="text-center">
        <a href="{% url 'lista_vuelos' %}" class="btn btn-outline-primary btn-lg">
            <i class="fas fa-list me-2"></i>{% trans "Ver Todos los Vuelos" %}
        </a>
    </div>
</div>
{% endif %}

<!-- Características de RutaCeleste -->
<div class="row mb-5">
    <div class="col-12">
        <h3 class="text-center mb-5">
            <i class="fas fa-star me-2"></i>{% trans "¿Por qué elegir RutaCeleste?" %}
        </h3>
    </div>
    <div class="col-md-4 mb-4">
        <div class="card h-100 text-center shadow-sm">
            <div class="card-body">
                <i class="fas fa-clock fa-3x text-primary mb-3"></i>
                <h5 class="card-title">{% trans "Puntualidad" %}</h5>
                <p class="card-text">{% trans "Más del 95% de nuestros vuelos salen a tiempo. Tu tiempo es valioso para nosotros." %}</p>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-4">
        <div class="card h-100 text-center shadow-sm">
            <div class="card-body">
                <i class="fas fa-shield-alt fa-3x text-success mb-3"></i>
                <h5 class="card-title">{% trans "Seguridad" %}</h5>
                <p class="card-text">{% trans "Flota moderna y mantenimiento de primera clase. Tu seguridad es nuestra prioridad." %}</p>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-4">
        <div class="card h-100 text-center shadow-sm">
            <div class="card-body">
                <i class="fas fa-heart fa-3x text-danger mb-3"></i>
                <h5 class="card-title">{% trans "Comodidad" %}</h5>
                <p class="card-text">{% trans "Asientos cómodos, entretenimiento a bordo y el mejor servicio de atención al cliente." %}</p>
            </div>
        </div>
    </div>
</div>

<!-- Destinos Populares -->
<div class="row mb-5">
    <div class="col-12">
        <h3 class="text-center mb-5">
            <i class="fas fa-map-marker-alt me-2"></i>{% trans "Destinos Populares" %}
        </h3>
    </div>
    <div class="col-md-3 col-sm-6 mb-4">
        <div class="card text-center shadow-sm">
            <div class="card-body">
                <i class="fas fa-building fa-2x text-primary mb-3"></i>
                <h6 class="card-title">{% trans "Buenos Aires" %}</h6>
                <p class="card-text small">{% trans "La capital que nunca duerme" %}</p>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-sm-6 mb-4">
        <div class="card text-center shadow-sm">
            <div class="card-body">
                <i class="fas fa-university fa-2x text-warning mb-3"></i>
                <h6 class="card-title">{% trans "Córdoba" %}</h6>
                <p class="card-text small">{% trans "Historia y cultura" %}</p>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-sm-6 mb-4">
        <div class="card text-center shadow-sm">
            <div class="card-body">
                <i class="fas fa-wine-glass-alt fa-2x text-success mb-3"></i>
                <h6 class="card-title">{% trans "Mendoza" %}</h6>
                <p class="card-text small">{% trans "Tierra de vinos" %}</p>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-sm-6 mb-4">
        <div class="card text-center shadow-sm">
            <div class="card-body">
                <i class="fas fa-mountain fa-2x text-info mb-3"></i>
                <h6 class="card-title">{% trans "Bariloche" %}</h6>
                <p class="card-text small">{% trans "Naturaleza y aventura" %}</p>
            </div>
        </div>
    </div>
</div>

<!-- Call to Action -->
{% if not user.is_authenticated %}
<div class="card bg-primary text-white text-center mb-5">
    <div class="card-body py-5">
        <h3 class="card-title">{% trans "¿Listo para volar?" %}</h3>
        <p class="card-text lead">{% trans "Únete a miles de pasajeros que confían en RutaCeleste" %}</p>
        <a href="{% url 'register' %}" class="btn btn-light btn-lg me-3">
            <i class="fas fa-user-plus me-2"></i>{% trans "Crear Cuenta" %}
        </a>
        <a href="{% url 'login' %}" class="btn btn-outline-light btn-lg">
            <i class="fas fa-sign-in-alt me-2"></i>{% trans "Iniciar Sesión" %}
        </a>
    </div>
</div>
{% endif %}
{% endblock %}
